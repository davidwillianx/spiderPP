<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    template="/WEB-INF/templates/dashboard_projeto_game.xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="content-dashboard" >
        
        
         
        
        <div class="row" id="main">
            <h:panelGroup layout="block" class="col-md-5">
                <h:messages></h:messages>
                <div id="notice"></div>
                <div class="row tiles-container  m-b-20 ">
                    <div class="m-l-10 ">
                        <div class="tiles grey p-t-15 p-b-15 p-l-25 ">
                            <h4 class="text-black semi-bold">Estorias</h4>
                        </div>
                        <div class="tiles white" id="stories">
                            
                            <c:forEach items="#{estoriaController.parentEstorias}" var="estoria">
                                <ui:fragment rendered="#{estoriaController.hasSubTask(estoria.estoriaPK.id)}">
                                    <ui:include src="/WEB-INF/templates/storyWithItsSubtasks.xhtml">
                                        <ui:param name="estoria" value="#{estoria}"/>
                                    </ui:include>
                                </ui:fragment>

                                <ui:fragment rendered="#{!estoriaController.hasSubTask(estoria.estoriaPK.id)}">
                                    <ui:include src="/WEB-INF/templates/storyElement.xhtml">
                                        <ui:param name="estoria" value="#{estoria}"/>
                                    </ui:include>
                                </ui:fragment>
                            </c:forEach>
                            
                            
                        </div> 
                    </div>
                </div>
            </h:panelGroup>

            
            <div class="row p-l-50">
                <div class="col-md-5">
                    <div class="grid simple">
                        <div class="grid-title">
                            <div class="row-fluid">
                                <div class="">
                                    <h4 class="text-black semi-bold">Estimativas</h4>
                                </div>
                                <div class="row m-l-5 m-r-10">
                                    <h:panelGroup layout="block" class="col-md-2" rendered="#{projetoController.showUserProjetoPersmission(projeto.id, usuario.id) == 1}">
                                        <a href="#" id="game-start" class="btn btn-primary " disabled="">Iniciar</a>
                                    </h:panelGroup>
                                    
                                    <!-- Resize doesnt work -->
                                    <div class="col-md-3">
                                        <div id="countdown"></div>
                                    </div>
                                </div>
                                
                            </div>

                        </div>
                        <div class="grid-body">

                            <div class="row " id="row-selected">    

                            </div>
                        </div>
                    </div>
                </div>

                <h:panelGroup class="col-md-5 " layout="block" rendered="#{projetoController.showUserProjetoPersmission(projeto.id, usuario.id) == 3}">
                    <div class="grid  simple ">
                        <div class="grid-title">
                            <h3>Escolha seu card!</h3>
                        </div>

                        <div class="grid-body" id="deck-section">
                            <div class="row " >

                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="0">0</h4>
                                    </div>
                                </div>

                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="1">1</h4>
                                    </div>
                                </div>



                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5" >
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="2">2</h4>
                                    </div>
                                </div>


                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="3">3</h4>
                                    </div>
                                </div>


                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="5">5</h4>
                                    </div>
                                </div>


                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white  no-margin p-t-20 p-b-20" est="8">8</h4>
                                    </div>
                                </div>


                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="13">13</h4>
                                    </div>
                                </div>


                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="20">20</h4>
                                    </div>
                                </div>

                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card  semi-bold text-white   no-margin p-t-20 p-b-20" est="40">40</h4>
                                    </div>
                                </div>

                                <div class="col-md-1 col-xs-5 no-padding m-r-5 m-b-5">
                                    <div class="tiles green text-center">
                                        <h4 class="opt-card semi-bold text-white  no-margin p-t-20 p-b-20" est="100">100</h4>
                                    </div>
                                </div>

                            </div>
                        </div>  
                    </div>
                </h:panelGroup>
            </div>
            
            
        </div>
        
         <script type="text/javascript">
              
             var  rmPath = "#{param.rm}";
             var prPath = "#{param.pr}";
             var  host = "ws://localhost:8080/spiderPP/spiderSocketGame";
             
             var idUsuario = #{usuario.id};
             var idProjeto = #{projeto.id};
             var author = "#{usuario.nome}";
             
         </script>
        
        <h:outputScript library="styles" name="assets/plugins/jquery-block-ui/jqueryblockui.js"/>
        <h:outputScript library="styles" name="assets/plugins/countdown360/jquery.countdown360.js"/>
        <h:outputScript library="styles" name="assets/js/gamescript.js"/> 
        <h:outputScript library="styles" name="assets/js/accordionStoriesWithSubtasks.js"/>
        <h:outputScript library="styles" name="assets/js/spider_socket.js"/>
        
        
        
    </ui:define>


</ui:composition>
 
