<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    template="/WEB-INF/templates/dashboard_projeto.xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="content-dashborad">

        <h:panelGroup layout="block" id="project_user_manager" class="row">

            <h:messages globalOnly="true" class="alert alert-info fade in"
                        errorStyle="alert alert-info fade in" showSummary="false"  showDetail="true">
            </h:messages>
            <h:message for="perfil_select" class="alert alert-error"></h:message>

            <div class="col-md-6">
                <div class="row">
                    <div class="grid simple">
                        <div class="grid-title">
                            <h4>Membros do Projeto</h4>
                            <!-- Caso querida adicionar opção de fechar<div class="tools"></div>-->                    
                        </div>

                        <div class="grid-body">

                            <h:panelGroup layout="block" id="grid_users" class="dataTables_wrapper form-inline">
                                <div class="row">
                                    <!-- Adicionar SELECT para quantidade-->
                                    <!--                                        <div class="col-md-6">
                                                                                <div class="">
                                                                                    <label>
                                                                                        
                                                                                    </label>
                                                                                </div>
                                                                            </div>-->
                                    <div class="col-md-6">
                                        <div class="">
                                            <label>
                                                <!--Espaco para busca -->
                                                <!--                                                <div class="form-horizontal">
                                                                                                    <h:inputText class="input-sm"/>
                                                                                                    <h:button class="btn btn-small btn-default" value="search"/>
                                                                                                </div>-->
                                            </label>
                                        </div>
                                    </div>
                                    <!-- Datatable -->
                                    <h:dataTable  value="#{usuarioController.usuarioOfProjeto}" var="usuarioOfProjeto"
                                                  class="table dataTable">
                                        <h:column class="">
                                            <f:facet name="header">Nome</f:facet>
                                            <h4>#{usuarioOfProjeto.nome}</h4>
                                        </h:column>
                                        <h:column class="">
                                            <f:facet name="header">Email</f:facet>
                                            <h4> #{usuarioOfProjeto.email}</h4> 
                                        </h:column>
                                        <h:column class="">
                                            <f:facet name="header">-</f:facet>
                                            <h:form>
                                                <h:commandButton  class=" btn btn-success btn-small" value="X" action="#{userProjetoController.removeUsuarioToProjeto(usuarioOfProjeto.id)}">
                                                    <f:ajax render=":project_user_manager" />
                                                </h:commandButton>
                                            </h:form>
                                        </h:column>
                                    </h:dataTable>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="row">
                    <div class="grid simple">
                        <div class="grid-title">
                            <h4>Inclua membros ao seu projeto</h4>
                        </div>
                        <div class="grid-body">
                            <div class="row">
                                <div class="dataTables_wrapper form-inline">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="">
                                                <label>
                                                    <!--Espaco para busca -->
                                                    <!--                                                <div class="form-horizontal">
                                                                                                        <h:inputText class="input-sm"/>
                                                                                                        <h:button class="btn btn-small btn-default" value="search"/>
                                                                                                    </div>-->
                                                </label>
                                            </div>
                                        </div>
                                        <h:dataTable value="#{usuarioController.usuariosOutOfProjeto}" var="usuarioOutOfProjeto"
                                                     class="table dataTable">
                                            <h:column>
                                                <f:facet name="header">Nome</f:facet>
                                                 #{usuarioOutOfProjeto.nome}
                                            </h:column>
                                            <h:column>
                                                <f:facet name="header">Atividade</f:facet>

                                                <h:form >
                                                    <h:selectOneMenu value="#{userProjetoController.perfilSelected}"  id="perfil_select"> 
                                                        <f:selectItem itemLabel="Selecione Cargo" noSelectionOption="true"/>
                                                        <f:selectItems value="#{controllerPerfil.perfis}" var="perfil" itemLabel="#{perfil.nome}" itemValue="#{perfil.id}"/>
                                                    </h:selectOneMenu>

                                                    <h:commandButton class="m-l-10 btn btn-small btn-dark" value="+" action="#{userProjetoController.inviteUserProjetoWithPerfil(usuarioOutOfProjeto)}">
                                                        <f:ajax  execute="@form" render=":project_user_manager" />
                                                    </h:commandButton>

                                                </h:form>
                                            </h:column>
                                        </h:dataTable>   

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </h:panelGroup> 

    </ui:define>
</ui:composition>